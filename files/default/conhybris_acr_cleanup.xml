<?xml version='1.1' encoding='UTF-8'?>
<project>
  <actions/>
  <description></description>
  <displayName>Hybris ACR Cleanup</displayName>
  <keepDependencies>false</keepDependencies>
  <properties>
    <hudson.model.ParametersDefinitionProperty>
      <parameterDefinitions>
        <hudson.model.ChoiceParameterDefinition>
          <name>Environment</name>
          <description>Environment to cleanup</description>
          <choices class="java.util.Arrays$ArrayList">
            <a class="string-array">
              <string>dev</string>
              <string>dev2</string>
              <string>dev3</string>
              <string>domane</string>
              <string>e2e</string>
              <string>proofing</string>
              <string>madone</string>
            </a>
          </choices>
        </hudson.model.ChoiceParameterDefinition>
      </parameterDefinitions>
    </hudson.model.ParametersDefinitionProperty>
  </properties>
  <scm class="hudson.scm.NullSCM"/>
  <canRoam>true</canRoam>
  <disabled>false</disabled>
  <blockBuildWhenDownstreamBuilding>false</blockBuildWhenDownstreamBuilding>
  <blockBuildWhenUpstreamBuilding>false</blockBuildWhenUpstreamBuilding>
  <triggers>
    <hudson.triggers.TimerTrigger>
      <spec>* * * * 6</spec>
    </hudson.triggers.TimerTrigger>
  </triggers>
  <concurrentBuild>false</concurrentBuild>
  <builders>
    <hudson.tasks.Shell>
      <command>docker login conbase.azurecr.io -u $CONBASE_USERNAME -p $CONBASE_PASSWORD
docker run conbase.azurecr.io/container-cleanup:v1.2 -u $AZURE_CLIENT_ID -p $AZURE_CLIENT_SECRET -t $AZURE_TENANT_ID -e $Environment</command>
    </hudson.tasks.Shell>
  </builders>
  <publishers/>
  <buildWrappers>
    <org.jenkinsci.plugins.credentialsbinding.impl.SecretBuildWrapper plugin="credentials-binding@1.17">
      <bindings>
        <com.microsoft.azure.util.AzureCredentialsBinding plugin="azure-credentials@1.6.0">
          <credentialsId>azureCreds</credentialsId>
          <subscriptionIdVariable>AZURE_SUBSCRIPTION_ID</subscriptionIdVariable>
          <clientIdVariable>AZURE_CLIENT_ID</clientIdVariable>
          <clientSecretVariable>AZURE_CLIENT_SECRET</clientSecretVariable>
          <tenantIdVariable>AZURE_TENANT_ID</tenantIdVariable>
        </com.microsoft.azure.util.AzureCredentialsBinding>
        <org.jenkinsci.plugins.credentialsbinding.impl.UsernamePasswordMultiBinding>
          <credentialsId>conBase</credentialsId>
          <usernameVariable>CONBASE_USERNAME</usernameVariable>
          <passwordVariable>CONBASE_PASSWORD</passwordVariable>
        </org.jenkinsci.plugins.credentialsbinding.impl.UsernamePasswordMultiBinding>
      </bindings>
    </org.jenkinsci.plugins.credentialsbinding.impl.SecretBuildWrapper>
  </buildWrappers>
</project>